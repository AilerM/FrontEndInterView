### 绘制邮件模版遇到的问题

### 一、背景
>新闻系统中，会抽出几条新闻为客户每周推送一封邮件，邮件需要展示：基本公众号信息，以及新闻内容；元素有图片 列表 二维码 链接 需要跳转且需要实现发送接口

### 二、问题

#### 开发
- positon float overflow 不管用
- 部分css3属性不能使用
- pc邮箱正常显示，手机样式错乱且不同型号错乱不一
- 无法写接口

#### 测试
- 无邮件内核，测试无法定位，不能使用chrom浏览器进行测试

#### UI
- UI图稿有虚线，各种左右结构，


### 三、解决过程
- 手写
  - 经过多轮样式调整，效果依然在不同平台展示千差万别, 各种兼容性处理在短时间比较困难

- mjml的出现
  - 搜索插件找到mjml
  - 测试mjml语法到自己邮件，发现mjml模版炫酷且样式各个平台统一

- mjml无api
  - 按照自己需要样式用mjml语法生成对应html，由于ui携带部分新属性，在mjml没有找到对应兼容api，且这个样式是全局不可或缺的；在加上左右结构过多，不易在规定几小时内写好

- mjml模版挑选
  - 故挑选mjml模版与自己需求相似，mjml模版较少，只能放弃原来的设计稿

- mjml局限
  - 因为彻底基于mjml,所以局限较多，抱着最后一根稻草希望，根据mjml结构绘制除自己相似功能邮件推送模版

- mjml造成小bug
  - mjml生成的html在pc没有问题，在移动端出现图片不受控制局面，通过找到html发现对应宽被mjml自动设置成100%；故需要每次手动更改

- mjml直接生成html的bug
  - 之前测试是通QQ邮箱发送到公司邮箱，正常，这次是通过php，发现样式表现不一依然错乱；

- qq邮箱助力
  - 偶尔间，将mjml生成html放到qq邮箱的html，并可视化进行了编辑，然后在你放到php模版，终极各种效果都已经正常

- 优化
  - 最后调整 各个文字元素间距 文字样式

>[email](https://mjml.io/try-it-live/templates/austin)

>2019-07-19